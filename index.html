
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>üí™ Carga Up - Evolua a cada treino!</title>
<meta name="theme-color" content="#00c853">
<style>
:root {
  --bg: #ffffff;
  --card: #f9f9f9;
  --text: #111;
  --accent: #00c853;
  --accent-light: #b9f6ca;
  --danger: #e53935;
  --border: #ccc;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  padding: 1rem;
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background: var(--bg);
  color: var(--text);
}
.container { max-width: 950px; margin: 0 auto 96px auto; }
h1 {
  text-align: center;
  color: var(--accent);
  margin-bottom: 1rem;
}
select {
  width: 100%;
  padding: 10px;
  border: 1px solid var(--border);
  border-radius: 10px;
  margin-bottom: 16px;
  font-size: 1rem;
  background: var(--card);
}
input, textarea, button {
  padding: 0.6rem 0.8rem;
  border-radius: 8px;
  border: 1px solid var(--border);
  background: var(--card);
  color: var(--text);
  font-size: 1rem;
}
textarea {
  width: 100%;
  min-height: 60px;
  resize: vertical;
}
ul { list-style: none; padding: 0; margin: 0; }
li {
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 12px;
  margin-bottom: 10px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.08);
  transition: background 0.3s;
}
li.concluido { background: var(--accent-light); }
.add-form { display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 12px; }
.add-form > * { flex: 1; min-width: 120px; }
.carga-item {
  background: rgba(0,0,0,0.04);
  border-radius: 6px;
  padding: 6px 8px;
  margin: 6px 0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.9rem;
}
.btn-row { display: flex; gap: 8px; margin-top: 8px; flex-wrap: wrap; }
.btn {
  flex: 1;
  padding: 8px;
  border-radius: 8px;
  border: none;
  font-weight: 600;
  cursor: pointer;
}
.btn.primary { background: var(--accent); color: #fff; }
.btn.warn { background: var(--danger); color: #fff; }
.btn.check { background: var(--accent); color: #fff; }
.reset-btn { background: var(--danger); color: #fff; margin-top: 16px; padding: 10px; width: 100%; border-radius: 8px; border: none; font-weight: 600; cursor: pointer; }
.obs-container { margin-top: 8px; display: flex; flex-direction: column; gap: 6px; }
.feedback {
  position: fixed;
  top: 18px;
  left: 50%;
  transform: translateX(-50%);
  background: var(--accent);
  color: #fff;
  padding: 8px 14px;
  border-radius: 8px;
  font-weight: 700;
  opacity: 0;
  transition: opacity .25s;
}
footer {
  text-align: center;
  margin-top: 24px;
  color: var(--accent);
  font-weight: 500;
  padding: 12px 0;
  border-top: 1px solid var(--border);
}
</style>
</head>
<body>

<div class="container">
  <h1>üí™ Carga Up - Evolua a cada treino!</h1>

  <select id="selectTreino">
    <option value="A">Treino A</option>
    <option value="B">Treino B</option>
    <option value="C">Treino C</option>
    <option value="D">Treino D</option>
    <option value="E">Treino E</option>
    <option value="F">Treino F</option>
  </select>

  <div class="add-form">
    <input id="nomeExercicio" type="text" placeholder="Nome do exerc√≠cio">
    <input id="series" type="number" placeholder="S√©ries">
    <input id="repeticoes" type="number" placeholder="Repeti√ß√µes">
    <input id="descanso" type="number" placeholder="Descanso (ex: 60)">
    <button id="btnAddEx" class="btn primary">Adicionar Exerc√≠cio</button>
  </div>

  <ul id="listaExercicios"></ul>
  
  <button id="btnResetTreino" class="reset-btn">üóëÔ∏è Resetar Treino</button>
</div>

<div id="feedback" class="feedback"></div>

<footer>üèãÔ∏è‚Äç‚ôÇÔ∏è Cada esfor√ßo conta! Continue se superando todos os dias!</footer>

<script>
function showFeedback(text, ms = 1500) {
  const el = document.getElementById('feedback');
  el.textContent = text;
  el.style.opacity = '1';
  clearTimeout(el._t);
  el._t = setTimeout(() => el.style.opacity = '0', ms);
}

function getJSON(key, fallback){ try { return JSON.parse(localStorage.getItem(key) || 'null') || fallback } catch(e){ return fallback } }
function setJSON(key, val){ localStorage.setItem(key, JSON.stringify(val)) }

let treinoAtual = "A";
let historicoGlobal = getJSON('historico_cargas', {});

function renderizarLista(){
  const lista = document.getElementById('listaExercicios');
  lista.innerHTML = '';
  const exs = getJSON(`treino_${treinoAtual}`, []);
  exs.forEach(ex => {
    const li = document.createElement('li');
    if (ex.concluido) li.classList.add('concluido');

    const ultimasCargas = ex.historico.slice(-5); // s√≥ mostrar √∫ltimas 5 cargas

    li.innerHTML = `
      <strong>${ex.nome}</strong>
      <div><small>S√©ries:</small> ${ex.series || '-'} | <small>Repeti√ß√µes:</small> ${ex.repeticoes || '-'} | <small>Descanso:</small> ${ex.descanso ? ex.descanso + ' segundos' : '-'}</div>
      <div>${ultimasCargas.length ? ultimasCargas.map(h => `
        <div class="carga-item">
          <span>${h.data}: ${h.carga} kg</span>
          <div style="display:flex;gap:6px">
            <button class="btn ghost" data-action="editarCarga" data-ex="${ex.id}" data-carga="${h.id}">Editar</button>
            <button class="btn ghost" data-action="removerCarga" data-ex="${ex.id}" data-carga="${h.id}">Remover</button>
          </div>
        </div>`).join('') : '<small>Sem carga registrada</small>'}</div>
      <div class="btn-row">
        <button class="btn primary" data-action="adicionarCarga" data-ex="${ex.id}">Adicionar Carga</button>
        <button class="btn warn" data-action="excluirEx" data-ex="${ex.id}">Excluir</button>
        <button class="btn check" data-action="concluirEx" data-ex="${ex.id}">‚úÖ</button>
      </div>
      <div class="obs-container">
        <label>Observa√ß√µes:</label>
        <textarea class="obs-area" data-ex="${ex.id}" placeholder="Anote aqui...">${ex.observacoes||''}</textarea>
      </div>
    `;
    lista.appendChild(li);
  });
}

function adicionarExercicio(){
  const nome = document.getElementById('nomeExercicio').value.trim();
  const series = document.getElementById('series').value.trim();
  const repeticoes = document.getElementById('repeticoes').value.trim();
  const descanso = document.getElementById('descanso').value.trim();
  if(!nome) return showFeedback('‚ö†Ô∏è Digite o nome do exerc√≠cio!');

  let historicoExistente = historicoGlobal[nome] || [];
  if(historicoExistente.length > 20) historicoExistente = historicoExistente.slice(-20);

  const exs = getJSON(`treino_${treinoAtual}`, []);
  exs.push({ id: Date.now(), nome, series, repeticoes, descanso, historico: [...historicoExistente], observacoes: '', concluido: false });
  setJSON(`treino_${treinoAtual}`, exs);

  document.getElementById('nomeExercicio').value = '';
  document.getElementById('series').value = '';
  document.getElementById('repeticoes').value = '';
  document.getElementById('descanso').value = '';
  renderizarLista();
  showFeedback('‚úÖ Exerc√≠cio adicionado!');
}

function adicionarCarga(id){
  const entrada = prompt('Digite a carga (kg):');
  if(!entrada) return;
  const carga = parseFloat(entrada.replace(',', '.'));
  if(Number.isNaN(carga)) return showFeedback('‚ö†Ô∏è Carga inv√°lida');

  const exs = getJSON(`treino_${treinoAtual}`, []);
  const ex = exs.find(x => x.id === id);

  const novoRegistro = { id: Date.now(), data: new Date().toLocaleDateString('pt-BR'), carga };
  ex.historico.push(novoRegistro);

  let historicoAtual = [...ex.historico];
  if(historicoAtual.length > 20) historicoAtual = historicoAtual.slice(-20);
  historicoGlobal[ex.nome] = historicoAtual;
  setJSON('historico_cargas', historicoGlobal);

  setJSON(`treino_${treinoAtual}`, exs);
  renderizarLista();
  showFeedback('üí™ Carga registrada!');
}

function editarCarga(idEx, idCarga){
  const exs = getJSON(`treino_${treinoAtual}`, []);
  const ex = exs.find(x => x.id === idEx);
  const item = ex?.historico.find(h => h.id === idCarga);
  const nova = prompt('Nova carga (kg):', item?.carga);
  if(!nova) return;
  const c = parseFloat(nova.replace(',', '.'));
  if(Number.isNaN(c)) return showFeedback('‚ö†Ô∏è Carga inv√°lida');
  item.carga = c;

  let historicoAtual = [...ex.historico];
  if(historicoAtual.length > 20) historicoAtual = historicoAtual.slice(-20);
  historicoGlobal[ex.nome] = historicoAtual;
  setJSON('historico_cargas', historicoGlobal);

  setJSON(`treino_${treinoAtual}`, exs);
  renderizarLista();
  showFeedback('‚úèÔ∏è Carga atualizada!');
}

function removerCarga(idEx, idCarga){
  const exs = getJSON(`treino_${treinoAtual}`, []);
  const ex = exs.find(x => x.id === idEx);
  ex.historico = ex.historico.filter(h => h.id !== idCarga);

  let historicoAtual = [...ex.historico];
  if(historicoAtual.length > 20) historicoAtual = historicoAtual.slice(-20);
  historicoGlobal[ex.nome] = historicoAtual;
  setJSON('historico_cargas', historicoGlobal);

  setJSON(`treino_${treinoAtual}`, exs);
  renderizarLista();
  showFeedback('üóëÔ∏è Carga removida!');
}

function excluirEx(id){
  if(!confirm('Excluir este exerc√≠cio?')) return;
  const exs = getJSON(`treino_${treinoAtual}`, []).filter(x => x.id !== id);
  setJSON(`treino_${treinoAtual}`, exs);
  renderizarLista();
  showFeedback('üóëÔ∏è Exerc√≠cio exclu√≠do!');
}

function concluirEx(id){
  const exs = getJSON(`treino_${treinoAtual}`, []);
  const ex = exs.find(x => x.id === id);
  ex.concluido = !ex.concluido;
  setJSON(`treino_${treinoAtual}`, exs);
  renderizarLista();
  alert("‚úÖ Exerc√≠cio conclu√≠do! N√£o esque√ßa de anotar suas cargas!");
}

function atualizarObs(id, valor){
  const exs = getJSON(`treino_${treinoAtual}`, []);
  const ex = exs.find(x => x.id === id);
  ex.observacoes = valor;
  setJSON(`treino_${treinoAtual}`, exs);
}

function resetarTreino(){
  if(!confirm("Deseja resetar este treino?")) return;
  const exs = getJSON(`treino_${treinoAtual}`, []);
  exs.forEach(ex => {
    historicoGlobal[ex.nome] = ex.historico;
  });
  setJSON('historico_cargas', historicoGlobal);

  setJSON(`treino_${treinoAtual}`, []);
  renderizarLista();
  showFeedback('üóëÔ∏è Treino resetado! Hist√≥rico de cargas mantido.');
}

document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('btnAddEx').addEventListener('click', adicionarExercicio);
  document.getElementById('listaExercicios').addEventListener('click', e => {
    const btn = e.target.closest('button');
    if(!btn) return;
    const action = btn.dataset.action;
    const exId = Number(btn.dataset.ex);
    if(action === 'adicionarCarga') adicionarCarga(exId);
    else if(action === 'editarCarga') editarCarga(exId, Number(btn.dataset.carga));
    else if(action === 'removerCarga') removerCarga(exId, Number(btn.dataset.carga));
    else if(action === 'excluirEx') excluirEx(exId);
    else if(action === 'concluirEx') concluirEx(exId);
  });
  document.getElementById('listaExercicios').addEventListener('input', e => {
    if(e.target.classList.contains('obs-area')){
      const id = Number(e.target.dataset.ex);
      atualizarObs(id, e.target.value);
    }
  });
  document.getElementById('selectTreino').addEventListener('change', e=>{
    treinoAtual = e.target.value;
    renderizarLista();
  });
  document.getElementById('btnResetTreino').addEventListener('click', resetarTreino);
  renderizarLista();
});
</script>
</body>
</html>
